<mat-sidenav-container class="sidenav-container ">

    <!-- üåê Men√∫ lateral -->
    <mat-sidenav #sidenav [mode]="isDesktop ? 'side' : 'over'" [opened]="isDesktop" class="sidenav">
        <mat-toolbar class="sidenav-header login-logo-container ">
            <img src="https://www.gob.pe/rails/active_storage/representations/redirect/eyJfcmFpbHMiOnsiZGF0YSI6MjI4OSwicHVyIjoiYmxvYl9pZCJ9fQ==--870ca7e046354e769c8b91e9c70061374fd26123/eyJfcmFpbHMiOnsiZGF0YSI6eyJmb3JtYXQiOiJwbmciLCJyZXNpemVfdG9fbGltaXQiOltudWxsLDQ4XX0sInB1ciI6InZhcmlhdGlvbiJ9fQ==--830247c4bafe7cadca50817d8559bf1a09e3aa28/essalud%20341x86%202019.png"
                alt="Logo" class="login-logo">
        </mat-toolbar>

        <mat-nav-list>

            <a mat-list-item routerLink="pacientes-rec" routerLinkActive="active">
                <mat-icon class="icon-menu">groups</mat-icon>
                <span>Pacientes</span>
            </a>

            <a mat-list-item routerLink="historial-rec" routerLinkActive="active">
                <mat-icon class="icon-menu">history</mat-icon>
                <span>Historial de pacientes</span>
            </a>
        </mat-nav-list>
    </mat-sidenav>

    <!-- üß© Contenido principal -->
    <mat-sidenav-content class="main-content">
        <!-- HEADER -->
        <mat-toolbar color="primary" class="toolbar">
            <!-- Bot√≥n de men√∫ -->
            <button mat-icon-button (click)="sidenav.toggle()" class="menu-btn">
                <mat-icon>menu</mat-icon>
            </button>

            <!-- T√≠tulo -->
            <span class="titulo-toolbar">Panel receptor</span>

            <!-- Espaciador flexible -->
            <span class="spacer"></span>

            <!-- Informaci√≥n del usuario -->
            <div class="usuario-info">
                <img src="https://cdn-icons-png.flaticon.com/512/149/149071.png" alt="Foto de perfil del usuario"
                    class="foto-perfil" />
                <div class="datos-usuario">
                    <span class="nombre-usuario">{{ userCurrent?.persona?.nombre + " " +
                        userCurrent?.persona?.apellidoPaterno + " " + userCurrent?.persona?.apellidoMaterno}}</span>
                    <span class="rol-usuario">{{ userCurrent?.rol?.denominacion }}</span>
                </div>
                <!-- üîΩ Bot√≥n con men√∫ desplegable -->
                <button mat-icon-button [matMenuTriggerFor]="menuUsuario" class="btn-flecha">
                    <mat-icon>expand_more</mat-icon>
                </button>

                <mat-menu #menuUsuario="matMenu">
                    <button mat-menu-item (click)="verPerfil()">
                        <mat-icon>person</mat-icon>
                        <span>Ver perfil</span>
                    </button>
                    <button mat-menu-item (click)="cerrarSesion()">
                        <mat-icon>logout</mat-icon>
                        <span>Cerrar sesi√≥n</span>
                    </button>
                </mat-menu>
            </div>
        </mat-toolbar>
        <!-- üß≠ Aqu√≠ se cargan los componentes hijos -->
            <router-outlet></router-outlet>
        <!-- MAIN -->
        <div class="row p-2 mt-4">
            <div class="col-12 col-lg-3">

            </div>
            <div class="col-12 col-lg-6 p-2">
                @if (loadTypeDocument) {
                <div class="d-flex justify-content-center">
                    <div class="spinner-grow m-5" style="width: 3rem; height: 3rem;" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                </div>
                } @else {
                <mat-card class="panel-registro">
                    <mat-card-header class="center-title ">
                        <mat-card-title> REGISTRO DE PACIENTE</mat-card-title>
                    </mat-card-header>
                    <mat-card-content>
                        <form [formGroup]="registroForm">
                            <mat-form-field appearance="outline" class="w-100 rounded-5" color="primary">
                                <mat-label class="f-s-14 f-w-600 m-b-8 d-block">
                                    Tipo de documento
                                </mat-label>
                                <mat-select formControlName="tipo_doc" required>
                                    @for (typeDocument of typeDocumentOptions; track $index) {
                                    <mat-option [value]="typeDocument.codigo">{{typeDocument.denominacion}}</mat-option>
                                    }
                                </mat-select>
                            </mat-form-field>


                            <div class="row p-0 m-0">
                                <div class="col-12 m-0 p-0">
                                    <mat-form-field appearance="outline" class="campo-doc w-100">
                                        <mat-label>N√∫mero de Documento</mat-label>
                                        <input matInput type="text" formControlName="num_doc" maxlength="8"
                                            placeholder="Ej: 842531126" required aria-label="'N√∫mero de Documento'"
                                            lass="rounded-5" (input)="onDniInput()" autofocus>

                                    </mat-form-field>

                                </div>

                                @if (!existsPerson && clickedSearch) {
                                <div class="alert alert-danger alert-dismissible fade show" role="alert">
                                    <strong>Error!</strong> Persono no registrada.
                                    <button type="button" class="btn-close" data-bs-dismiss="alert"
                                        aria-label="Close"></button>
                                </div>
                                }
                            </div>

                            <mat-form-field appearance="outline" class="w-100" color="primary">
                                <mat-label>Nombres Completos</mat-label>
                                <input matInput formControlName="nombres" required aria-label="Nombre">
                            </mat-form-field>

                            <div class="row">
                                <div class="col-12 col-md-6">
                                    <mat-form-field appearance="outline" class="w-100" color="primary">
                                        <mat-label>Apellidos Completos</mat-label>
                                        <input matInput formControlName="apellido_paterno" aria-label="Apellidos">
                                    </mat-form-field>
                                </div>
                                <div class="col-12 col-md-6">
                                    <mat-form-field appearance="outline" class="w-100" color="primary">
                                        <mat-label>Apellidos Completos</mat-label>
                                        <input matInput formControlName="apellido_materno" aria-label="Apellidos">
                                    </mat-form-field>
                                </div>
                            </div>

                            <div class="botones-form">
                                <button mat-raised-button class="boton-cita" type="button"
                                    (click)="registrarCita(Prioridades.NORMAL)">
                                    <mat-icon>check_circle</mat-icon>
                                    Registrar Cita
                                </button>
                            </div>
                        </form>
                    </mat-card-content>
                </mat-card>
                }
            </div>

        </div>

    </mat-sidenav-content>

</mat-sidenav-container>